import streamlit as st
import random
import time

# --- 1. データライブラリ（モビリティ視点・全19トレンド） ---
TREND_DATA = [
    {
        "category": "労働・学習",
        "mega_title": "スキル賞味期限の瞬間化と流動知能",
        "mob_mega": """
        【🚗 未来の移動】
        「通勤」という概念が完全に消滅します。移動は「観光」か「対面が必要な稀な儀式」のためだけのものになり、都市交通のピークタイム（ラッシュアワー）という概念が歴史上のものとなります。
        """,
        "micro_title": "ナノ・スキル経済の勃興",
        "mob_micro": """
        【🚦 現在の兆し】
        「ワーケーション」や「デジタルノマドビザ」の普及により、仕事と旅の境界が溶解中。移動中の車内や機内が「ただの座席」ではなく「高速通信完備の動くオフィス」であることが、輸送サービス選択の第一条件になりつつあります。
        """,
        "universal_title": "プロテウス的人間 (The Protean Self)",
        "universal_detail": "ギリシャ神話の海神プロテウスのように、環境に合わせて自己を変容させることこそが、激動の時代の生存戦略です。定住せず、流動的に生きることは精神的な防衛反応でもあります。",
        "questions": [("⑧ 不在・消失型", "もし「通勤ラッシュ」が歴史の教科書にしか載っていない世界なら、駅の役割は何？")]
    },
    {
        "category": "居住・生活",
        "mega_title": "都市からの重力消失と超・多拠点化",
        "mob_mega": """
        【🚗 未来の移動】
        「引っ越し」というイベントがなくなり、「家ごと移動する」ことが日常になります。住宅そのものが自動運転車（モバイルハウス）となり、道路は「車が走る場所」から「家が停泊・移動するインフラ」へと役割を変えます。
        """,
        "micro_title": "モバイル・ハウスと多拠点サブスク",
        "mob_micro": """
        【🚦 現在の兆し】
        バンライフ（Van Life）の流行や、軽トラキャンピングカーの需要増。「不動産」ならぬ「可動産」という言葉が生まれ、住民票をどこに置くかという法的な議論が、移動の実態に追いついていません。
        """,
        "universal_title": "ソングラインとノマドの本能",
        "universal_detail": "人類史の99%において、私たちは狩猟採集民（ノマド）でした。定住生活はここ1万年の異常事態に過ぎません。移動生活への回帰は、本来の野生を取り戻すプロセスです。",
        "questions": [("⑤ 環境・世界設定型", "住所が「緯度経度（現在地）」でしか表せない世界で、郵便物はどう届く？")]
    },
    {
        "category": "身体・健康",
        "mega_title": "生体データの公共財化とプライバシーの死",
        "mob_mega": """
        【🚗 未来の移動】
        「救急車を呼ぶ」前に、車やベッドが異常を検知して自動的に病院へ搬送を開始します。MaaS車両自体が「動く診察室」となり、移動中にバイタルチェックや遠隔診断が完了するため、病院への通院という移動目的が激減します。
        """,
        "micro_title": "未病スコアと感情シェア",
        "mob_micro": """
        【🚦 現在の兆し】
        運転中のドライバーの視線や心拍数を監視し、眠気や体調不良を検知して警告するシステムが標準装備され始めています。車は単なる移動手段から、最も高精度な「健康診断デバイス」へと進化しつつあります。
        """,
        "universal_title": "パノプティコンと承認欲求",
        "universal_detail": "人間は見られることで社会的な存在証明を得る生き物です。「誰にも見つけてもらえない（社会的死）」への恐怖の方が生物学的に根深いため、私たちは安心と引き換えに透明化を受け入れます。",
        "questions": [("⑦ 規範・価値観ゆらぎ型", "体調不良の人が公共交通機関に乗ることが、飲酒運転と同じくらい重罪になったら？")]
    },
    {
        "category": "人間関係",
        "mega_title": "血縁独占の終了と拡張家族の法制化",
        "mob_mega": """
        【🚗 未来の移動】
        「帰省ラッシュ」が消え、代わりに「拡張家族（コミュニティ）」を巡回するための多拠点移動が増加します。高齢者や子供の送迎を、血縁のないコミュニティメンバーが自動運転シャトルでシェアする「ケア・モビリティ」が社会インフラになります。
        """,
        "micro_title": "コ・ペアレンティングと友達婚",
        "mob_micro": """
        【🚦 現在の兆し】
        UberやGrabのようなライドシェアが、単なる移動手段ではなく「地域の足」としての互助機能を担い始めています。他人の車に乗ることへの抵抗感が薄れ、移動空間が「半・公共空間」化しています。
        """,
        "universal_title": "アロペアレンティング",
        "universal_detail": "人間は本来、親以外の個体も子育てに参加する共同繁殖（アロペアレンティング）を行う種です。拡張家族への回帰は、サバンナで生きていた頃の「信頼できる村」を再構築しようとする本能的な揺り戻しです。",
        "questions": [("⑥ 主体変化型", "もしタクシー運転手が、移動中に人生相談やケアワークも提供する「動くカウンセラー」になったら？")]
    },
    {
        "category": "食・農業",
        "mega_title": "精密発酵による脱・動物性タンパク質",
        "mob_mega": """
        【🚗 未来の移動】
        食肉の長距離コールドチェーン（冷凍輸送網）が崩壊します。巨大な牧場から運ぶ必要がなくなり、都市近郊の「培養プラント」からラストワンマイルで配送されるため、食料輸送におけるトラック需要とCO2排出が激減します。
        """,
        "micro_title": "セルラー・アグリカルチャーの食卓",
        "mob_micro": """
        【🚦 現在の兆し】
        Uber Eatsなどのフードデリバリーが、完成した料理だけでなく、培養肉キットや植物工場の野菜を届ける「都市型分散農業の物流網」として機能し始めています。
        """,
        "universal_title": "雑食動物のパラドックスとケガレ",
        "universal_detail": "人間は自然の分類に収まらないものをケガレ（不気味）と感じますが、物語と儀礼によってケガレをハレ（聖なるもの）に転換する文化的な消化能力を持っています。",
        "questions": [("① 仮定型", "もしトラックで運ばれるのが「家畜」ではなく「培養液のタンク」だけになったら、高速道路の風景はどう変わる？")]
    },
    {
        "category": "経済・価値",
        "mega_title": "GDPの終焉とウェルビーイング経済",
        "mob_mega": """
        【🚗 未来の移動】
        「速さ」よりも「環境負荷の低さ」が移動の価値になります。飛行機での短距離移動が禁止され、リニアや夜行列車が見直されます。移動の際に排出するCO2が個人のカーボンウォレットから即時決済されるため、無駄な移動が経済的に不可能になります。
        """,
        "micro_title": "ドーナツ経済の実践都市",
        "mob_micro": """
        【🚦 現在の兆し】
        欧州での「飛び恥（Flight Shame）」運動や短距離航空路線の廃止法案。あえて時間をかけて鉄道や船で移動することをラグジュアリーとする「スロートラベル」の価値観が富裕層から広まっています。
        """,
        "universal_title": "イースタリンの逆説",
        "universal_detail": "所得が一定を超えると幸福度は上がりません。物質的欠乏を克服した人類が、終わりのない快楽追求から脱却し、徳の実践による「真の良き生」へ回帰しようとする文明的な揺り戻しです。",
        "questions": [("⑤ 環境・世界設定型", "時速30km以上で移動することが「下品」とされる社会になったら、車はどう進化する？")]
    },
    {
        "category": "宇宙・資源",
        "mega_title": "地球圏外経済圏の確立",
        "mob_mega": """
        【🚗 未来の移動】
        「宇宙旅行」が特別な冒険ではなく、東京-NY間をロケットで30分で結ぶ「P2P（地点間）輸送」として実装されます。重力圏を脱出する輸送インフラ（軌道エレベーター等）が、21世紀の鉄道網として機能し始めます。
        """,
        "micro_title": "スペースデブリ除去と宇宙葬",
        "mob_micro": """
        【🚦 現在の兆し】
        SpaceXのStarship開発や、ヴァージン・ギャラクティックの商業飛行開始により、宇宙が「見る場所」から「行く場所（到達可能な目的地）」へと認識が変わりつつあります。
        """,
        "universal_title": "英雄の旅とオーバービュー・エフェクト",
        "universal_detail": "フロンティアへの衝動は「境界を越えたい」という根源的な欲求です。宇宙進出は、地球という揺り籠からの自立であり、人類という種全体が通過するイニシエーション（通過儀礼）です。",
        "questions": [("① 仮定型", "重力が地球の1/6の月面で、車椅子ユーザーが最強のランナーになるとしたら？")]
    },
    {
        "category": "統治・社会",
        "mega_title": "アルゴリズムによる自動統治（DAO）",
        "mob_mega": """
        【🚗 未来の移動】
        道路や信号機の管理権限が行政からDAOへ移行します。「この道路を直すべきか？」は通過する車のセンサーデータとトークン投票によって自動決定され、予算が執行されます。走行ルールもコミュニティの合意アルゴリズムで動的に決定されます。
        """,
        "micro_title": "ネーション・ステートの民営化",
        "mob_micro": """
        【🚦 現在の兆し】
        Wazeのようなナビアプリで、ユーザーが取り締まり情報や事故情報を共有し合い、行政のアナウンスよりも早い「集合知による交通管制」が実質的なインフラとして機能しています。
        """,
        "universal_title": "社会契約論とトラストレス",
        "universal_detail": "人間は集団規模が大きくなると互いを監視できなくなり、裏切りを防ぐために虚構を必要としました。ブロックチェーンは現代における「絶対公平な神」の代用物であり、私たちはコードという新しい神に公正な裁きを委ねようとしています。",
        "questions": [("④ 転用・誤用型", "道路の補修費用を、そこを通る車が自動採掘（マイニング）して支払うとしたら？")]
    },
    {
        "category": "寿命・医療",
        "mega_title": "老化の「疾患」化と克服",
        "mob_mega": """
        【🚗 未来の移動】
        「免許返納」という概念が消滅します。身体機能が衰えない、あるいはサイボーグ技術と自動運転によるアシストで100歳でも安全に移動できるため、高齢者の行動範囲が若者と変わらなくなります。「シルバーシート」も不要になります。
        """,
        "micro_title": "生物学的年齢によるマネジメント",
        "mob_micro": """
        【🚦 現在の兆し】
        シニアカーのデザインが洗練され、WHILLのように「歩行者扱いのモビリティ」が空港や病院でシェアされ始めています。足腰の衰えをモビリティで補完し、移動の自由を維持しようとする動きが加速しています。
        """,
        "universal_title": "テセウスの船",
        "universal_detail": "細胞をすべて入れ替えて若返り続けた時、その人は元のその人と言えるでしょうか？老化の克服は、生物学的な勝利であると同時に、人間性の定義（有限性の中に美を見出すこと）への最大の挑戦となります。",
        "questions": [("③ 拡張・極端化型", "100歳のお年寄りが、パワードスーツを着て若者より速く走れるようになったら、歩道のルールはどうなる？")]
    },
    {
        "category": "現実・デジタル",
        "mega_title": "ミラーワールドと現実の相対化",
        "mob_mega": """
        【🚗 未来の移動】
        「移動」の定義が「身体の輸送」から「意識の伝送」へ変わります。高精細なVRやテレイグジスタンス（遠隔存在）ロボットにより、物理的に移動せずに「そこに行く」ことが可能になり、物理的な交通渋滞が解消されます。
        """,
        "micro_title": "デジタルファッションとVTuber",
        "mob_micro": """
        【🚦 現在の兆し】
        Google Earth VRやストリートビューでの「旅行」に満足する層の出現。また、Zoom会議の背景機能により、物理的にどこにいるかを隠して社会活動を行う「場所の匿名化」が一般化しています。
        """,
        "universal_title": "プラトンの洞窟",
        "universal_detail": "物理現実は仮の姿（影）であり、データこそが本質であるという世界観への反転です。アバター文化は、素の自分（物理身体）の不自由さから魂を解放したいという、根源的な変身願望の現れです。",
        "questions": [("② 逆転型", "物理的に旅行する人が「貧乏人（VR機材が買えない人）」と見なされる逆転現象が起きたら？")]
    },
    {
        "category": "移動・都市",
        "mega_title": "移動のサービス化と所有権の消滅",
        "mob_mega": """
        【🚗 未来の移動】
        車内が「リビングルーム」や「オフィス」化し、移動時間が「拘束時間」から「自由時間」へ変わります。ホテルが動く、オフィスが動くなど、不動産と可動産の境界が消滅し、都市そのものが流動的になります。
        """,
        "micro_title": "マイクロモビリティとロボタクシー",
        "mob_micro": """
        【🚦 現在の兆し】
        若者の車離れとカーシェアの普及。所有欲よりも利用権（アクセス権）を重視するサブスクリプション型ライフスタイルが、車だけでなく服や家具にも波及しています。
        """,
        "universal_title": "拡張自己の喪失",
        "universal_detail": "愛車を手放すことは、アイデンティティの一部を切り離す痛みでもあります。所有権の放棄は執着からの解放に通じますが、同時に「自分の城」を失う不安も生みます。公共化される移動空間で、安らぎをどこで確保するかが課題となります。",
        "questions": [("④ 転用・誤用型", "もし移動中の車内が「動くホテル」になり、寝ている間に目的地に着くなら、家賃と交通費の区別はどうなる？")]
    },
    {
        "category": "環境・資源",
        "mega_title": "サーキュラーエコノミー（完全循環）",
        "mob_mega": """
        【🚗 未来の移動】
        「静脈物流（廃棄物回収）」が「動脈物流（製品配送）」と同じくらい重要になります。自動運転回収ロボットが街を巡回し、製品を分解・再資源化する工場へと運びます。車自体もモジュール化され、古くなった部品だけを交換して乗り続けることが標準になります。
        """,
        "micro_title": "修理する権利とアップサイクル",
        "mob_micro": """
        【🚦 現在の兆し】
        EVバッテリーの再利用（リユース）ビジネスの勃興。使い終わった車の電池を家庭用蓄電池として再利用するサイクルや、シェアサイクルで「所有せず使い回す」モデルが定着しています。
        """,
        "universal_title": "金継ぎの美学",
        "universal_detail": "人間には完璧なもの（新品）への憧れと同時に、歴史や物語が宿るもの（古物）への愛着があります。大量生産・大量廃棄の時代に失われた「モノとの関係性（アニミズム）」を取り戻すことが、循環型経済の心理的な駆動力となります。",
        "questions": [("⑩ 観察・再定義型", "ゴミ収集車が「資源採掘車」と呼ばれるようになったら、街の風景はどう変わる？")]
    },
    {
        "category": "エネルギー",
        "mega_title": "エネルギー・インターネット（VPP）",
        "mob_mega": """
        【🚗 未来の移動】
        EV（電気自動車）の役割が「移動手段」から「動く蓄電池」へと拡大します。駐車中のEVが街に電気を供給し、移動することでエネルギーを物理的に運搬する「エネルギーの運び屋」となります。給電スポットが通貨交換所のような役割を果たします。
        """,
        "micro_title": "電力のP2P取引とオフグリッド",
        "mob_micro": """
        【🚦 現在の兆し】
        災害時にEVから住宅へ給電するV2H（Vehicle to Home）の普及。車が非常用電源として機能することで、モビリティが防災インフラの一部に組み込まれ始めています。
        """,
        "universal_title": "互恵的利他主義",
        "universal_detail": "人間は「お返し」が期待できる時に他者を助けるよう進化しました。電力取引はこの助け合いの本能のシステム化です。また、巨大システムに依存せず自立したいというオートノミー（自律）への欲求も根底にあります。",
        "questions": [("③ 拡張・極端化型", "道路がワイヤレス給電化し、走り続ける限りエネルギーが無限に供給されるとしたら、車は止まることをやめる？")]
    },
    {
        "category": "製造・技術",
        "mega_title": "ジェネレーティブ・マニュファクチャリング",
        "mob_mega": """
        【🚗 未来の移動】
        「製品の輸送」が激減し、「原材料（粉末や液体）の輸送」が物流の主役になります。欲しい製品は最寄りのプリントセンター、あるいは自宅で出力されるため、長距離トラック輸送の多くが「データの送信」に置き換わり、物流の総量が劇的に減少します。
        """,
        "micro_title": "3Dプリント住宅とバイオプリンティング",
        "mob_micro": """
        【🚦 現在の兆し】
        車の補修部品をメーカーから取り寄せるのではなく、データをダウンロードして地元の工場で出力するオンデマンド・パーツ供給が、旧車市場や航空宇宙産業で始まっています。
        """,
        "universal_title": "ホモ・ファーベルと錬金術",
        "universal_detail": "データから物体を生み出す3Dプリントは、無から有を生み出す錬金術の夢の科学的実現です。消費するだけの受動的な存在から、誰もが創造主（クリエイター）になれるという感覚は、人間の根源的な自己効力感を刺激します。",
        "questions": [("① 仮定型", "もし旅行先で「着替え」を持っていかず、現地で服をプリントして着るのが当たり前になったら、スーツケースは不要になる？")]
    },
    {
        "category": "インターフェース",
        "mega_title": "アンビエント・コンピューティング（画面の消失）",
        "mob_mega": """
        【🚗 未来の移動】
        車のダッシュボードから計器類やナビ画面が消滅します。フロントガラス全面がARディスプレイになるか、あるいは直接脳にルート情報が投影されるため、「地図を見る」という行為がなくなります。車との対話は完全に自然言語（会話）で行われます。
        """,
        "micro_title": "サイレントスピーチと思考入力",
        "mob_micro": """
        【🚦 現在の兆し】
        HUD（ヘッドアップディスプレイ）の普及により、ドライバーが視線を落とさずに情報を得るスタイルが定着。音声アシスタントによるエアコン操作や目的地の設定が、物理ボタン操作を代替し始めています。
        """,
        "universal_title": "拡張された心と不気味の谷",
        "universal_detail": "人間は本能的に摩擦（フリクション）のない状態、いわゆるフロー状態を好みます。思考と操作の間のタイムラグがゼロになることは究極の快楽ですが、同時に「どこまでが自分で、どこからが機械か」という自己境界の喪失不安とも戦うことになります。",
        "questions": [("⑥ 主体変化型", "車があなたの感情を読み取り、イライラしている時は勝手にリラックスできるルートに変更したら？")]
    },
    {
        "category": "水・インフラ",
        "mega_title": "水のニュー・オイル化と循環利用",
        "mob_mega": """
        【🚗 未来の移動】
        巨大な水道管インフラの維持が困難になり、給水車や自律型の「水配送ロボット」がインフラの一部を代替します。また、水素エンジンの普及により、車が「水を排出する（走れば走るほど空気が潤う）」存在へと環境価値を逆転させます。
        """,
        "micro_title": "排水リサイクルビールと空気製水",
        "mob_micro": """
        【🚦 現在の兆し】
        災害時にWOTAのような可搬型の水再生プラントが被災地へ急行し、インフラ復旧を待たずにシャワーや手洗いを提供する「モバイル・ウォーター・インフラ」が実用化されています。
        """,
        "universal_title": "ケガレの浄化",
        "universal_detail": "あらゆる文化において水は浄化の象徴です。水不足は「共有地の悲劇」の典型ですが、水を運ぶモビリティが「聖なる資源の運び手」として再定義されることで、近代合理主義から自然を畏怖する古代的感性への回帰が起こります。",
        "questions": [("⑦ 規範・価値観ゆらぎ型", "車が排気ガスの代わりに「きれいな水」を撒き散らすなら、渋滞は歓迎される？")]
    },
    {
        "category": "農業・食糧",
        "mega_title": "農業の工業化（垂直農法・閉鎖環境）",
        "mob_mega": """
        【🚗 未来の移動】
        野菜の長距離輸送（フードマイレージ）が消滅します。都市のビルの中やスーパーの隣で生産されるため、トラック輸送が不要になります。さらに、移動販売車自体が「走る植物工場」となり、収穫しながら移動販売する究極の鮮度提供が実現します。
        """,
        "micro_title": "コンテナファームとロボット受粉",
        "mob_micro": """
        【🚦 現在の兆し】
        スーパーの店頭に設置された小型の栽培ケース（In-store farming）から、客が自分で収穫して購入するスタイルが登場。輸送コストゼロ、鮮度最大の「ゼロ・マイル」消費が支持され始めています。
        """,
        "universal_title": "エデンの園",
        "universal_detail": "植物工場は、人間が自然の不確実性を排除し、人工的な楽園（エデンの園）を作ろうとする試みです。これはテクノロジーによる自然支配の極致ですが、同時に土から離れることによる「土地喪失の悲しみ（ソラスタルジア）」も引き起こします。",
        "questions": [("① 仮定型", "もしトラックの荷台がすべて畑になり、移動中に野菜が育つとしたら、物流コストの概念はどうなる？")]
    },
    {
        "category": "セキュリティ",
        "mega_title": "ゼロトラストと量子セキュリティ",
        "mob_mega": """
        【🚗 未来の移動】
        自動運転車へのハッキングが「テロ」と同義になります。車両の制御権を乗っ取られないよう、量子暗号通信による強固なセキュリティが法的に義務化されます。また、空港や駅のゲートが消滅し、歩いているだけで生体認証とセキュリティチェックが完了する「ウォークスルー・セキュリティ」が標準になります。
        """,
        "micro_title": "パスワードレスと生体認証",
        "mob_micro": """
        【🚦 現在の兆し】
        スマホが車のキーになる「デジタルキー」の普及。顔認証でドアが開き、エンジンがかかる車種が登場しており、物理的な鍵を持ち歩く習慣が過去のものになりつつあります。
        """,
        "universal_title": "囚人のジレンマと信頼のコスト",
        "universal_detail": "人間は「顔見知り」にはオキシトシン（信頼ホルモン）を分泌しますが、見知らぬデジタル信号には恐怖を感じます。テクノロジーによる証明は、この生物学的な不信感をバイパスするための、現代の通行手形や割符の役割を果たしています。",
        "questions": [("② 逆転型", "もし「鍵」という概念がなくなり、誰でもどの車にも乗れる（ただし全行動が記録される）社会になったら？")]
    },
    {
        "category": "教育",
        "mega_title": "AI家庭教師によるハイパー個別最適化",
        "mob_mega": """
        【🚗 未来の移動】
        「通学」という概念が変わります。学校へ行くための移動時間が、AIチューターとの対話時間や、VRでの予習時間（動く教室）に変わります。座学は自宅で完了するため、学校は「集合してプロジェクトを行う場所」となり、修学旅行のような移動型学習が日常化します。
        """,
        "micro_title": "ゲーミフィケーション学習と先生AI",
        "mob_micro": """
        【🚦 現在の兆し】
        通学バスの中でのタブレット学習や、過疎地におけるオンライン授業の併用。移動のハンディキャップをテクノロジーで埋めるだけでなく、移動時間そのものを学びの場に変える「エデュテイメント・モビリティ」の実験が始まっています。
        """,
        "universal_title": "ピグマリオン効果",
        "universal_detail": "人は「助けがあればできる領域（ZPD）」で最も成長します。AI家庭教師への愛着は、理想的な師匠（メンター・アーキタイプ）への投影です。しかし、過度な最適化は偶然の出会いや理不尽への耐性を奪うリスクもあります。",
        "questions": [("④ 転用・誤用型", "もし自動運転バス自体が「学校」になり、街中を移動しながら授業を行うとしたら、校庭はどこになる？")]
    }
]

# --- 2. UI設定 ---
st.set_page_config(page_title="Future Mobility Insight", layout="wide")

# CSS: シンプルかつ鮮明なデザイン
st.markdown("""
    <style>
    body { font-family: "Helvetica Neue", Arial, sans-serif; }
    
    .card {
        padding: 25px;
        border-radius: 12px;
        height: 100%;
        box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        display: flex;
        flex-direction: column;
    }
    
    /* Mega Card: 未来のモビリティ */
    .mega-card {
        background-color: #1a1c24;
        color: #e0e0e0;
        border-top: 6px solid #00D1B2;
    }
    
    /* Micro Card: 現在のモビリティ兆し */
    .micro-card {
        background-color: #ffffff;
        color: #2c3e50;
        border: 1px solid #ddd;
        border-top: 6px solid #FF4B4B;
    }

    /* Universal Card: 普遍的真理 */
    .universal-card {
        background-color: #f3f0e6;
        color: #4a3b2a;
        border: 1px solid #d4c5a3;
        border-top: 6px solid #D4AF37;
    }

    /* ボックススタイル（強調表示） */
    .mob-box-mega {
        background-color: rgba(0, 209, 178, 0.15);
        color: #b8f2e6;
        padding: 15px;
        border-radius: 8px;
        margin-top: 15px;
        font-weight: 500;
        line-height: 1.6;
        white-space: pre-wrap;
        flex-grow: 1; /* コンテンツを引き伸ばす */
    }
    
    .mob-box-micro {
        background-color: #fff0f0;
        color: #5a1a1a;
        padding: 15px;
        border-radius: 8px;
        margin-top: 15px;
        font-weight: 500;
        line-height: 1.6;
        white-space: pre-wrap;
        flex-grow: 1;
    }

    .question-card {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 30px;
        border-radius: 15px;
        margin-top: 30px;
        text-align: center;
        box-shadow: 0 8px 20px rgba(0,0,0,0.25);
    }
    
    .category-tag { font-size: 0.75em; padding: 4px 10px; border-radius: 20px; display: inline-block; margin-bottom: 10px; border: 1px solid #888; text-transform: uppercase; letter-spacing: 0.05em; }
    h3 { margin-top: 0 !important; font-weight: 700; font-size: 1.3em; line-height: 1.3; min-height: 2.6em; }
    p { margin: 0; }
    
    .stButton>button { height: 3.5em; font-size: 20px; font-weight: 600; width: 100%; }
    </style>
    """, unsafe_allow_html=True)

st.title("🚗 未来モビリティ洞察ジェネレーター")
st.markdown("""
未来（Mega Trend）、現在（Micro Trend）、普遍（Universal Truth）の3つの視点から、
**「移動」の概念がどう変容するか**をシンプルに提示します。
""")

if st.button("モビリティの未来を透視する"):
    with st.spinner("時間軸を統合中..."):
        time.sleep(0.5)
    
    trend = random.choice(TREND_DATA)
    selected_question = random.choice(trend["questions"])
    q_type, q_text = selected_question
    
    col1, col2, col3 = st.columns(3)
    
    # 左：Mega Trend (未来の移動)
    with col1:
        st.markdown(f"""
        <div class="card mega-card">
            <div class="category-tag" style="color:#aaa; border-color:#555;">Mega Trend</div>
            <h3 style="color:#00D1B2;">🌊 {trend['mega_title']}</h3>
            <div class="mob-box-mega">{trend.get('mob_mega', '')}</div>
        </div>
        """, unsafe_allow_html=True)
        
    # 中：Micro Trend (現在の兆し)
    with col2:
        st.markdown(f"""
        <div class="card micro-card">
            <div class="category-tag" style="color:#666; border-color:#ccc;">Micro Trend</div>
            <h3 style="color:#FF4B4B;">🔍 {trend['micro_title']}</h3>
            <div class="mob-box-micro">{trend.get('mob_micro', '')}</div>
        </div>
        """, unsafe_allow_html=True)

    # 右：Universal Truth (普遍的な人間性)
    with col3:
        st.markdown(f"""
        <div class="card universal-card">
            <div class="category-tag" style="color:#6b5b45; border-color:#a89f88;">Universal Truth</div>
            <h3 style="color:#B8860B;">🏛️ {trend['universal_title']}</h3>
            <p style="margin-top:15px; line-height:1.6;">{trend['universal_detail']}</p>
        </div>
        """, unsafe_allow_html=True)

    # 下：問い
    st.markdown(f"""
    <div class="question-card">
        <div style="font-size:0.9em; opacity:0.8; margin-bottom:10px; letter-spacing: 0.05em;">
            思考の補助線：{q_type}
        </div>
        <h2 style="margin:0; font-size: 1.8em;">Q. {q_text}</h2>
    </div>
    """, unsafe_allow_html=True)
    
else:
    st.info("👆 ボタンを押すと、モビリティの未来・現在・本質が提示されます。")
